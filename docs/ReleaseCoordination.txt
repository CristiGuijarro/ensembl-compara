  COMPARA PRODUCTION CYCLE
============================

1. Once the release coordinator has sent the mail for declaration of
intention, ask the other members of compara group (or related) what
they intend to produce. Sometimes, you have to wait a bit that gene
builders do their declaration first to know what compara will need to
produce and also potential schema changes. Compara has one extra day
to send the DOI, because we have to know which new species are added.

For homologues and families, ask Albert (avilella@ebi.ac.uk).  
For whole genome alignments and synteny ask Javier (jherrero@ebi.ac.uk). 

2. Mail the compara declaration of intentions to ensembl-admin@ebi.ac.uk
send the DOI after the Genebuilders

3. Define priorities and assign jobs to the team members.

3bis. The current (rel.56) compara_master database is sf5_ensembl_compara_master on compara1 

4. Add in the master compara database
(compara1:3306/kb3_ensembl_compara_master) the new entries in the
genome_db and dnafrag tables. You can set up your registry and use the
~ensembl-compara/scripts/pipeline/update_genome.pl script. This script
sets the new genome_dbs as the default assemblies.
You have to create new genome_db_id (dnafrag) when it is a new assembly, or a new species. 
Sometimes it's done by the pairwise guys as they want to start building earlier. 

eg. 
perl update_genome.pl --reg_conf reg_conf_v44.pl --compara compara_master --species bushbaby

eg.
perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/update_genome.pl \
 --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_48/v48.conf \
 --compara compara-master --species "Ochotona princeps"

5. Wait for the handover before starting to build the new database in case
any of the new species cannot make it. Don't forget to switch the
assembly_default values of genome_db in this case.
 [1] for species making it / used in the pipeline
 [0] for species not making it / or old assemblies

6. Update the ncbi_taxa_node and ncbi_taxa_name in the master DB using the
ncbi_taxonomy database located in mysql::/ens-livemirror:3306/ncbi_taxonomy
This is usually done by the person who runs the orthologs/paralogs.
For more information, here is the doc ensembl-compara/scripts/taxonomy/README-taxonomy

mysqldump -u ensro -h ens-livemirror -P3306 --extended-insert --compress --delayed-insert ncbi_taxonomy \
ncbi_taxa_node ncbi_taxa_name | mysql -u ensadmin -pxxxx -h compara1 kb3_ensembl_compara_master

Some of the species need fixing to be webcode-compatible. This is usually done in ens-livemirror, so it's not needed anywhere else. E.g.:

 "update ncbi_taxa_name set name = \"Canis familiaris\" where taxon_id = 9615 and name_class = \"scientific name\" and name = \"Canis lupus familiaris\""
 "update ncbi_taxa_name set name = \"Canis lupus familiaris\" where taxon_id = 9615 and name_class = \"synonym\" and name = \"Canis familiaris\""

 "update ncbi_taxa_name set name = \"Pongo abelii\" where taxon_id = 9600 and name_class = \"scientific name\" and name = \"Pongo pygmaeus abelii\""
 "update ncbi_taxa_name set name = \"Pongo pygmaeus abelii\" where taxon_id = 9600 and name_class = \"synonym\" and name = \"Pongo pygmaeus abelii\""

7. New method_link_species_set entries might be added using the
~ensembl-compara/scripts/pipeline/create_mlss.pl script. The release
coordinator (or any team member) should create a new
method_link_species_set in the master database before starting a new
pipeline in order to get a unique method_link_species_set_id. Ideally
they can be created before starting to build the new database although
new method_link_species_sets can be added later on.
Sometimes the DNA alignment guys add the MLSS themselves. 
For the homologies this is done by the homologues guys

eg. for the pairwise alignment
 perl create_mlss.pl --method_link_type  BLASTZ_NET --genome_db_id 22,51 --source "ensembl"  --reg_conf reg_conf_v44.pl --compara compara_master

# --pw stands for all pairwised genome_db_ids in the list provided
# --sg stands for keep genome_db_id in the list alone (singleton) 

#orthologues
echo -e "201\n" | /usr/local/ensembl/bin/perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/create_mlss.pl --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_53/mlss_53.conf --pw --f --genome_db_id "3,4,5,16,18,22,27,29,31,33,34,36,37,38,39,42,43,44,46,48,49,51,52,53,55,56,57,58,60,61,62,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,88" 1>create_mlss.ENSEMBL_ORTHOLOGUES.201.out 2>create_mlss.ENSEMBL_ORTHOLOGUES.201.err

# paralogues btw                              
echo -e "202\n" | /usr/local/ensembl/bin/perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/create_mlss.pl --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_53/mlss_53.conf --pw --f --genome_db_id "3,4,5,16,18,22,27,29,31,33,34,36,37,38,39,42,43,44,46,48,49,51,52,53,55,56,57,58,60,61,62,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,88" 1>create_mlss.ENSEMBL_PARALOGUES.btw.202.out 2>create_mlss.ENSEMBL_PARALOGUES.btw.202.err

# paralogues wth                              
echo -e "202\n" | /usr/local/ensembl/bin/perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/create_mlss.pl --f --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_53/mlss_53.conf --sg --genome_db_id "3,4,5,16,18,22,27,29,31,33,34,36,37,38,39,42,43,44,46,48,49,51,52,53,55,56,57,58,60,61,62,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,88" 1>create_mlss.ENSEMBL_PARALOGUES.wth.202.out 2>create_mlss.ENSEMBL_PARALOGUES.wth.202.err

# proteintrees                                
echo -e "401\n" | /usr/local/ensembl/bin/perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/create_mlss.pl --f --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_53/mlss_53.conf --name "protein trees" --genome_db_id "3,4,5,16,18,22,27,29,31,33,34,36,37,38,39,42,43,44,46,48,49,51,52,53,55,56,57,58,60,61,62,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,88" 1>create_mlss.PROTEIN_TREES.401.out 2>create_mlss.PROTEIN_TREES.401.err

# families
echo -e "301\n" | /usr/local/ensembl/bin/perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/create_mlss.pl --f --reg_conf /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_53/mlss_53.conf --name "families" --genome_db_id "3,4,5,16,18,22,27,29,31,33,34,36,37,38,39,42,43,44,46,48,49,51,52,53,55,56,57,58,60,61,62,64,65,66,67,68,69,77,78,79,80,81,82,83,84,85,86,87,88" 1>create_mlss.FAMILY.301.out 2>create_mlss.FAMILY.301.err

8. Create the new database for the new release and add it to your
registry configuration file. Use the ~ensembl-compara/sql/table.sql
file to create the tables and populate the database with the relevant
primary data and genomic alignments that can be reused from the
previous release. This can be done with the
~ensembl-compara/scripts/pipeline/populate_new_database.pl script.  It
requires the master database, the previous released database and the
fresh new database with the tables already created. The script will
copy relevant data from the master and the old database into the new
one. 

Note: make sure there are no error messages, as sometimes different
versions of mysql may give you an error message about invalid options
of mysqldump.

  mysql -u USER -pPASSWD -h compara1 -P 3306 \
      -e "CREATE DATABASE avilella_ensembl_compara_48"
  mysql -u USER -pPASSWD -h compara1 -P 3306 \
      avilella_ensembl_compara_48 < ~/src/ensembl-compara/sql/table.sql
  populate_new_database.pl --master compara_master
      --old compara_52 --new compara_53

If new method_link_species_sets are added in the master after this, you use this
script again to copy the new relevant data. In such case, you will have to skip
the old_database in order to avoid trying to copy the dna-dna alignments and
syntenies again.

  populate_new_database.pl --master compara_master --new compara_48

9. Check that primary data (species data, dnafrags...) in the new compara DB
match the data in the corresponding core databases using the healthchecks. You
may have to edit the ensj-healthcheck/database.properties file. It should look
like this:

    host=compara1
    port=3306
    user=ensadmin
    password=***********

    # Database driver class - shouldn't need to be changed
    driver=org.gjt.mm.mysql.Driver

    # Master schema - see CompareSchema healthcheck
    # This setting is ignored if CompareSchema is not run
    master.schema=master_schema_38

    # Secondary database connection details
    secondary.host=ecs2
    secondary.port=3364
    secondary.user=ensro
    secondary.driver=org.gjt.mm.mysql.Driver

Now you can run the compara-compara_external_foreign_keys healthchecks:

#  ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara \
#      -d2 .+_core_48_.+ compara_external_foreign_keys

  ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara \
      -d2 .+_core_48_.+ compara_external_foreign_keys

...and correct mismatches if any!

10. Merge data. The fastest way to merge new data is to mysqlimport them.

- Translated BLAT

  It's now translated-blat-net.

- TRANSLATED_BLAT_NET, BlastZ-Net, Pecan, Gerp

  These data should be in a production database. You can copy them using the
  copy_data.pl script in ensembl-compara/scripts/pipeline. This script requires
  write access in the production database if the dnafrag_ids need fixing or the
  data must be copyied in binary mode (this is required for conservation scores).
  Example:

  bsub -q yesterday -I ensembl-compara/scripts/pipeline/copy_data.pl \
    --from_url mysql://ro_user@host/production_db \
    --to_url mysql://rw_user:password@host/release_db --mlss 268

- Syntenies

  Please refer to the documentation in the ensembl-compara/script/synteny directory.

- Protein trees/homologues/families

  The merge is done by the person in charge of the protein compara production
  side. The compara release coordinator needs to let him/her know where is the
  database to merge to. It involves:

  copying the homology db (usually from compara2 to compara1):

  ssh mysqlens@compara1
  emacs -nw /tmp/avilella_compara_homology_48.copy_options
  compara2        3306    avilella_compara_homology_48        compara1        3306    avilella_compara_homology_48
  perl ~avilella/src/ensembl_main/ensembl/misc-scripts/CopyDBoverServer.pl \
    -pass xxxx -noflush /tmp/avilella_compara_homology_48.copy_options \
    > /tmp/avilella_compara_homology_47.copy.err 2>&1 &

  and then merging the data in compara1 with:

  ssh mysqlens@compara1
  bash
  cd /mysql/data_3306/tmp
  perl /nfs/acari/avilella/src/ensembl_main/ensembl-compara/scripts/pipeline/merge_protein_data.pl \
    -host compara1 -user ensadmin -pass xxxx \
     -src_db avilella_compara_homology_48 \
    -dest_db avilella_ensembl_compara_48 -socket /mysql/data_3306/mysql.sock

- Ancestral database

  Reuse the one in previous release if it hasn't changed and apply core patches:

ssh mysqlens@compara1
emacs -nw /tmp/avilella_ensembl_ancestral_53.copy_options

compara1        3306    kb3_ensembl_ancestral_52        compara1	3306    avilella_ensembl_ancestral_53

bash
perl ~kb3/src/ensembl_main/ensembl/misc-scripts/CopyDBoverServer.pl -pass ensembl -noflush /tmp/avilella_ensembl_ancestral_53.copy_options > /tmp/avilella_ensembl_ancestral_53.copy.err 2>&1 &


ssh mysqlens@ens-staging
emacs -nw /tmp/ensembl_ancestral_53.copy_options

compara1        3306    avilella_ensembl_ancestral_53        ens-staging	3306    ensembl_ancestral_53

bash
perl ~kb3/src/ensembl_main/ensembl/misc-scripts/CopyDBoverServer.pl -pass ensembl -noflush /tmp/ensembl_ancestral_53.copy_options > /tmp/ensembl_ancestral_53.copy.err 2>&1 &


11. Drop method_link_species_set entries for alignments which did not make it.

12. Update the max_alignment_length. You can use the corresponding healthcheck
with the -repair option:

    ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara -repair Meta

13. Run the healthchecks:

  ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara \
      -d2 .+_core_48_.+ compara_external_foreign_keys

  ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara \
      compara_db_constraints

  ./run-healthcheck.sh -d avilella_ensembl_compara_48 -type compara \
      protein_db_constraints

...and correct mismatches if any!

NOTE about Vicugna which may raise an error, but no need to worry about it:
Ok, so then because the classification in the meta table in core is flat, there is no "Vicugna pacos" entry, but a "Vicugna" genus, and a "pacos" that combined gives "Vicugna pacos".
In which case, we should keep the "Lama" genus in NCBI taxonomy, and only change the "Lama pacos" to "Vicugna pacos" as we have done.
This means that I wouldn't worry about this anymore, knowing that is going to raise a warning in the healthchecks, and leave it as it is.


13.5. Run ANALYZE TABLE and OPTIMIZE TABLE commands

eg
mysqlcheck --analyze --verbose --host=compara1 --port=3306 --user=ensadmin --password=ensembl --databases kb3_ensembl_compara_52

mysqlcheck --optimize --verbose --host=compara1 --port=3306 --user=ensadmin --password=ensembl --databases kb3_ensembl_compara_52

14. Ask the release coordinator to point the test web server to the compara DB.

15. Create a patch to convert a compara DB from the previous release to the new
one. The patch should include at least an update of the schema_version in the
meta table!

16. Update the files in the ~ensembl-compara/sql directory:

cd PATH_TO/ensembl-compara/sql/

mysql -h ens-staging -uensro -N -e "SELECT * FROM genome_db order by genome_db_id asc" ensembl_compara_XX > genome_db.txt
mysql -h ens-staging -uensro -N -e "SELECT * FROM method_link order by method_link_id asc" ensembl_compara_XX > method_link.txt

You will have to change the default schema_version in the table.sql file (last line of the file)

17. Apply patches to the test databases and verify that they work fine.
Recompile the test database.

Don't forget to commit these changes into the repository!

18. Update files in public-plugins/ensembl/htdocs/info/docs/compara

You might need to update the create_mlss_table.conf file with new species added. Or you can use the order of species given in the species tree

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link PECAN \
    --list > pecan.inc

or
  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link PECAN \
    --list --species_tree ~/src/ensembl_main/ensembl-compara/scripts/pipeline/species_tree_blength.nh > pecan.inc

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link ORTHEUS \
    --list --species_tree ~/src/ensembl_main/ensembl-compara/scripts/pipeline/species_tree_blength.nh > epo.inc

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link TRANSLATED_BLAT \
    --trim --species_tree ~/src/ensembl_main/ensembl-compara/scripts/pipeline/species_tree_blength.nh > tblat.inc

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link TRANSLATED_BLAT_NET \
    --trim --species_tree ~/src/ensembl_main/ensembl-compara/scripts/pipeline/species_tree_blength.nh > tblat_net.inc

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link BLASTZ_NET \
    --trim > blastz_net.inc

or to produce a simple list because the table is getting too big

  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link BLASTZ_NET \
    --species_tree ~/src/ensembl_main/ensembl-compara/scripts/pipeline/species_tree_blength.nh --blastz_list > blastz_net.inc


  perl ~/src/ensembl_main/ensembl-compara/docs/create_mlss_table.pl \
    --reg_conf ~/.ensembl_init --dbname Compara48 --method_link SYNTENY \
     --trim  > synteny.inc

 ==> The resulting blastz-net table is huge. In order to make it slightly smaller,
   you can divide it into amniota vertebrates and other chordates (see latest
   release for an example) but you'll have to do it manually as the current
   script doesn't know how to do it.

The copy to ens-staging took about 1h 10 min for v53:

[mysqlens@ensdb-2-10 ~]$ tail -f /tmp/avilella_ensembl_compara_53.copy.err
//
// rcp Copying  compara1:/mysql/data_3306/databases/avilella_ensembl_compara_53...DONE (6:54:24)
// Checking /mysql/data_3306/tmp/ensembl_compara_53/*.MYI in progress...
//
myisamchk: MyISAM file conservation_score.MYI
myisamchk: warning: 1 client is using or hasn't closed the table properly
myisamchk: MyISAM file dnafrag.MYI
myisamchk: warning: 1 client is using or hasn't closed the table properly
myisamchk: MyISAM file genomic_align.MYI
myisamchk: warning: 1 client is using or hasn't closed the table properly
//
// Checking /mysql/data_3306/tmp/ensembl_compara_53/*.MYI DONE
// moving /mysql/data_3306/tmp/ensembl_compara_53 to /mysql/data_3306/databases DONE
//
// End of all copy processes (8:7:11)
//
// Processes summary
// SUCCEEDED copy of avilella_ensembl_compara_53 on compara1 to ensembl_compara_53 on ens-staging


19. Update files in sanger-plugins/htdocs/info/software/compara

This used to be ensembl-webcode but all the static content information was changed to sanger-plugins. 

Update for schema change and tutorial

20. Once the final compara db has been copied to ens-staging MySQL server, there
is one last thing to do, update the display_label in member table as well as the gene
description.

Once the copy is in ens-staging, we apply this insert that makes joins
between core and compara dbs for the member table:

mysql -hens-staging -uensro -N -e 'show databases like "%core\_54\_%"'|awk '{print "UPDATE "$1".xref x, "$1".gene g, "$1".gene_stable_id gsi, member m SET m.display_label=x.display_label WHERE g.display_xref_id=x.xref_id AND g.gene_id=gsi.gene_id AND m.stable_id=gsi.stable_id AND m.source_name=\"ENSEMBLGENE\";"}' > update_display_label.sql

mysql -hens-staging -uensadmin -pxxxxx ensembl_compara_54 < update_display_label.sql

mysql -hens-staging -uensro -N -e 'show databases like "%core\_54\_%"'|awk '{ print "UPDATE "$1".gene_stable_id gs, "$1".gene g, member m SET m.description=g.description WHERE g.gene_id=gs.gene_id and gs.stable_id=m.stable_id and m.source_name=\"ENSEMBLGENE\";"}' > update_gene_description.sql

mysql -hens-staging -uensadmin -pxxxxx ensembl_compara_54 < update_gene_description.sql

Ensure that the indexes in all tables in ens-staging are correct. This will do it as yesterday jobs, which are limited to 10 concurrently running:

mysql -hens-staging -uensadmin -pxxxxx ensembl_compara_53 -N -e "show tables" | while read i ; do echo $i===; bsub -q yesterday -o /dev/null -Janalyze.$i mysql -hens-staging -uensadmin -pxxxxx ensembl_compara_53 -N -e "ANALYZE TABLE $i"; done

21. Don't forget to dump the EMF files to go on the FTP sites, for multiple alignment, and protein trees.

For protein tree (multiple alignments and newick trees), the person in
charge of the pipeline uses ensembl-compara/scripts/tree/dumpTreeMSA.pl script. 
It can dump both files in emf gzip format at the same time.

This is the process to dump the genetree data from Ensembl Compara:

21.0 - Create a dir where to dump each file:

mkdir -p /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps
cd /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps

21.1 - Create a file with the genetree ids with this sql command:

mysql -hens-staging -uensro ensembl_compara_52 -N -e "select distinct ptn.node_id from protein_tree_node ptn LEFT JOIN protein_tree_tag ptt ON ptn.node_id=ptt.node_id WHERE ptn.root_id=ptn.parent_id and ptn.node_id not in (0,1) group by ptn.node_id having group_concat(ptt.tag) not like \"%cluster_had_to_be_broken_down%\"" > tree_id_list.txt

21.2 - Create a hash of subdirectories to dump the data evenly:

perl ~/src/ensembl_main/ensembl-personal/avilella/scripts/split_infile.pl -i tree_id_list.txt -l 1 -hashed tree_id_list.txt
Last dir: 02:75:12
wc -l tree_id_list.txt
32270 tree_id_list.txt

21.3 - Create a job for each genetree in a generic hive db like this:

perl ~/src/ensembl_main/ensembl-personal/avilella/hive/cmd_hive.pl -url mysql://ensadmin:ensembl@compara2/avilella_hive_generic -input_id 'perl /nfs/acari/avilella/dumpTreeMSA_id.pl --list /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/$h1/$h2/$h3/tree_id_list.txt --url mysql://ensro@ens-staging/ensembl_compara_52 --nh_out 1 -aln_out 1 -nhx_out 1' -hashed_a 00:00:00 -hashed_b 03:22:69 -hive_capacity 200 -batch_size 5 -logic_name h_emf_dumps_v52_1_1_2

21.4 - Run the jobs with throttling:

beekeeper.pl -url mysql://ensadmin:ensembl@compara2/avilella_hive_generic -loop -lsf_options '-q normal -R"select[myens_livemirror<800 && mycompara2<2000 && myens_staging<800] rusage[myens_livemirror=10:duration=10:decay=1:mycompara2=10:duration=10:decay=1:myens_staging=10:duration=10:decay=1]"' -lifespan 1200 -logic_name h_emf_dumps_v52_1_1_1

21.5 - Once the jobs are finished, cat all the files into one by type:

export TIMESTAMP=`date +2%3y%m%d_%H%M%S`
bsub -q long -o $TIMESTAMP.out -e $TIMESTAMP.err 'find /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/ -name "*.aln*" | sort | xargs cat > Compara.gene_trees.52.emf'

export TIMESTAMP=`date +2%3y%m%d_%H%M%S`
bsub -q long -o $TIMESTAMP.out -e $TIMESTAMP.err 'find /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/ -name "*.nhx.*" | sort | xargs cat > Compara.nhx_trees.52.emf'

export TIMESTAMP=`date +2%3y%m%d_%H%M%S`
bsub -q long -o $TIMESTAMP.out -e $TIMESTAMP.err 'find /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/ -name "*.nh.emf" | sort | xargs cat > Compara.newick_trees.52.emf'

21.6 - Compress the files

bsub -o /dev/null  -q yesterday  gzip Compara.newick_trees.52.emf
bsub -o /dev/null  -q yesterday  gzip Compara.nhx_trees.52.emf
bsub -o /dev/null  -q yesterday  gzip Compara.gene_trees.52.emf

21.7 - Create the final dump directory, copy the README.* files from the previous release and update if needed:

mkdir -p /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/
cp /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_51/dumps/README.* /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/
mv /lustre/scratch1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/*.gz /lustre/work1/ensembl/avilella/hive/avilella_compara_homology_52/dumps/

21.8 - Send an email to the release coordinator pointing to the files.

22. Once the final compara db has been copied, and everyone is happy with the data, and the Compara Coordinator survived his task, well the Compara Coordinator could buy some drinks at the Red Lion after handover. Special clause for Mart related coordinator, the drinks will be after the mart release. 
